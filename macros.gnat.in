%_GNAT_project_dir @GNAT_project_dir@
# _GNAT_project_dir is the directory where GNAT project files shall be.

%GNAT_builder_flags %(echo '%{?_smp_mflags}' | egrep --only-matching '(^| )-j[0-9]+( |$)') -R -p -XHARDWARE_PLATFORM=%{_arch}
# GNAT_builder_flags contains only parameters for the builder, that is either
# Gnatmake or GPRbuild.
# Gnatmake and GPRbuild have a -j parameter just like Make, but they might not
# understand any other Make parameter that might appear in _smp_mflags some day,
# so extract only -j from _smp_mflags.
# -R avoids an unnecessary runpath in some cases.
# -p creates directories specified in project files.
# HARDWARE_PLATFORM is used by directories.gpr.

%Ada_optflags %{optflags} -gnatn
# Ada_optflags contains parameters to be passed to the compiler, GCC, when the
# language to be compiled is Ada.
# -gnatn enables pragma Inline.

%Gnatlink_flags -g
# -g makes Gnatlink refrain from deleting binder files so that they can be
# included in debuginfo packages.

%Gnatmake_optflags -cargs %{Ada_optflags} -largs %{Gnatlink_flags} -margs %{GNAT_builder_flags}
%GPRbuild_optflags -cargs:Ada %{Ada_optflags} -cargs:C %{optflags} -cargs:C++ %{optflags} -cargs:Fortran %{optflags} -gargs %{GNAT_builder_flags}
# Gnatmake_optflags and GPRbuild_optflags contain both the parameters for the
# builder itself and parameters that the builder shall pass to the tools it
# invokes.

%GNAT_optflags %{Gnatmake_optflags}
# GNAT_optflags is retained for compatibility.
